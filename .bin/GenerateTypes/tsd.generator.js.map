{"version":3,"file":"tsd.generator.js","sourceRoot":"","sources":["../../src/GenerateTypes/tsd.generator.ts"],"names":[],"mappings":";;AAAA,2BAA6B;AAC7B,kCAAoC;AACpC,oCAAsC;AACtC,sCAAwC;AAExC,IAAM,SAAS,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAC9C,IAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAG5C,IAAM,cAAc,GAAG,aAAa,CAAC;AACrC,IAAM,cAAc,GAAG,cAAY,cAAc,MAAG,CAAC;AAOxC,QAAA,QAAQ,GAAG,UAAC,CAAkB;IACzC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;QACjC,IAAI,OAAO,GAAG,EAAE,CAAC;QAEjB,IAAM,GAAG,GAAG,IAAI;aACb,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;aACV,IAAI,CAAC,SAAS,CAAC;YACd,SAAS,EAAE,CAAC,CAAC,SAAS;SACvB,CAAC,CAAC;aACF,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;aACnC,IAAI,CAAC,SAAS,CAAC,UAAC,IAAS;YACxB,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YAEnC,MAAM,CAAC,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;aACF,EAAE,CAAC,KAAK,EAAE;YACT,OAAO,CAAC,OAAO,CAAC,CAAC;QACnB,CAAC,CAAC;aACD,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACzB,CAAC,CAAC;SACC,IAAI,CAAC,UAAC,CAAC,IAAK,OAAQ,CAAC,EAAT,CAAS,CAAC;SACtB,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpB,CAAC,CAAA","sourcesContent":["import * as gulp from 'gulp';\nimport * as Promise from 'bluebird';\nimport * as insert from 'gulp-insert';\nimport * as beautify from 'js-beautify';\n\nconst jsonToTsd = require('gulp-json-to-tsd');\nconst intercept = require('gulp-intercept');\n\n\nconst NAMESPACE_NAME = 'Beetlejuice';\nconst appendTemplate = `export = ${NAMESPACE_NAME};`;\n\ntype GenerateOptions = {\n  namespace: string;\n  src: string;\n}\n\nexport const generate = (o: GenerateOptions) => {\n  return new Promise((resolve, reject) => {\n    var content = '';\n\n    const res = gulp\n      .src(o.src)\n      .pipe(jsonToTsd({\n        namespace: o.namespace,\n      }))\n      .pipe(insert.append(appendTemplate))\n      .pipe(intercept((file: any) => {\n        content = file.contents.toString();\n\n        return file;\n      }))\n      .on('end', () => {\n        resolve(content);\n      })\n      .on('error', reject);\n  })\n    .then((r) => <string>r)\n    .then(beautify);\n}\n"]}