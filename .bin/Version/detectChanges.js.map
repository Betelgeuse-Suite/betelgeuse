{"version":3,"file":"detectChanges.js","sourceRoot":"","sources":["../../src/Version/detectChanges.ts"],"names":[],"mappings":";;AAAA,yBAA2B;AAC3B,uCAAiC;AAOjC,IAAM,WAAW,GAAe;IAC9B,CAAC,EAAE,OAAO;IACV,CAAC,EAAE,OAAO;IACV,CAAC,EAAE,OAAO;CACX,CAAA;AAED,IAAM,oBAAoB,GAAyB;IACjD,IAAI,EAAE,CAAC;IACP,CAAC,EAAE,EAAE;IACL,CAAC,EAAE,EAAE;IACL,CAAC,EAAE,EAAE;CACN,CAAC;AAEF,IAAM,cAAc,GAAG,CAAC,CAAC,MAAM,CAC7B,UAAC,QAAQ,EAAE,EAAQ;QAAN,cAAI;IAAO,OAAA,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,oBAAoB,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,GAAG,QAAQ,CAAC;AAAjF,CAAiF,EACzG,MAAM,CACP,CAAC;AAEW,QAAA,aAAa,GAAG,UAAC,CAAc,EAAE,CAAc;IAC1D,MAAM,CAAC,WAAW,CAAC,cAAc,CAAC,gBAAI,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AACvD,CAAC,CAAC","sourcesContent":["import * as R from 'ramda';\nimport { diff } from 'deep-diff';\nimport { ReleaseType } from 'semver';\nimport { FileContent } from './Version';\n\ntype ChangeType = { [index: string]: ReleaseType }\ntype ChangeTypePriorities = { [index: string]: number };\n\nconst changeTypes: ChangeType = {\n  E: 'patch',\n  N: 'minor',\n  D: 'major',\n}\n\nconst changeTypePriorities: ChangeTypePriorities = {\n  NONE: 0,\n  E: 10,\n  N: 20,\n  D: 30,\n};\n\nconst getChangesKind = R.reduce(\n  (prevKind, { kind }) => ((changeTypePriorities[kind] > changeTypePriorities[prevKind]) ? kind : prevKind),\n  'NONE',\n);\n\nexport const detectChanges = (a: FileContent, b: FileContent): ReleaseType => {\n  return changeTypes[getChangesKind(diff(a, b) || [])];\n};\n"]}